### 1. Description of HaplotypeCaller Module

The HaplotypeCaller module is a widely used tool in bioinformatics for variant calling from high-throughput sequencing data. It is specifically designed to accurately identify and genotype genetic variations, including single nucleotide polymorphisms (SNPs), insertions, deletions, and larger structural variants . The module employs advanced algorithms and statistical models to make reliable variant calls

Its a combination of local re-assembly, likelihood calculation, and statistical modeling helps to improve the sensitivity and specificity of variant calling, enabling researchers to gain insights into genetic variation and its potential impact on biological processes.

### 2. Description of Interfaces and Dependencies

- Specifications of Input Files
1st to Run somatic variant caller from GATK on all samples :

- Aligned BAM file: The primary input for the HaplotypeCaller module is a Binary Alignment/Map (BAM) file. The BAM file contains the aligned sequencing reads, where each read is mapped to its most likely position in the reference genome.
- The BAI file is always generated alongside the BAM file

```
        bam = "bam/{sample}.nodup.recal.bam" if config["remove_duplicates"] == True else "bam/{sample}.recal.bam",
        bai = "bam/{sample}.nodup.recal.bam.bai" if config["remove_duplicates"] == True else "bam/{sample}.recal.bam.bai",
```
- Genome reference : 
```
        gnomad_ref = config["gatk"][config["samples"]]["gnomad_ref"] 
```
- Ouput Files 
The output of the HaplotypeCaller module is commonly a file in the Variant Call Format (VCF) containing information about the identified genetic variants in the sample . Overall , it provides a comprehensive summary of the detected genetic variants, enabling downstream analyses such as variant annotation, population genetics studies, and identification of potentially disease-causing variants.

As for the TBI file , it is a separate index file that is typically generated for VCF files and is used to enable quick and efficient retrieval of data from large VCF files, particularly for specific genomic regions of interest.

```
        VCF = temp("haplotype_caller_tmp/{sample}_germline_variants_ON_{interval}.vcf.gz"),
        TBI = temp("haplotype_caller_tmp/{sample}_germline_variants_ON_{interval}.vcf.gz.tbi")
```

The HaplotypeCaller module's execution may generate temporary or intermediate files as part of its execution . Once the variant calling is complete, it is often necessary to concatenate or merge these temporary files into a single final output file.

- input file :
-
HaplotypeCaller files generated from different samples or genomic regions in VCF format .
```
        vcfs = expand("haplotype_caller_tmp/{{nsample}}_germline_variants_ON_{mutect_interval}.vcf.gz", mutect_interval=mutect_intervals)
```
- output file :

The main output of the "concatenate_haplotypecaller" rule is a single merged VCF file that contains the variant calls from all the input HaplotypeCaller files. This merged VCF file combines the variant information for all samples or genomic regions, providing a comprehensive overview of the variants detected across the dataset

As well as an index file, commonly in the Tabix Index (TBI) format that allows for quick querying of specific genomic regions within the VCF file.

lastly , the temporary text file is being used to store a list or collection of VCF filenames related to a particular sample. t can be used as an intermediate step within a larger workflow or program where this list of VCF filenames is needed for further processing or analysis.

```
        concatened_vcf = temp("haplotype_caller/{nsample}_germline_variants.vcf.gz"),
        concatened_tbi = temp("haplotype_caller/{nsample}_germline_variants.vcf.gz.tbi"),
        vcf_liste      = temp("haplotype_tmp_list/{nsample}_haplotype_tmp_list.txt")
```

The HaplotypeCaller_filtering rule is designed to perform filtering on the output of the HaplotypeCaller tool from GATK. The rule takes an input VCF file generated by HaplotypeCaller and applies filtering criteria to produce a filtered VCF file as the output. 

```
        VCF = "haplotype_caller/{sample}_germline_variants.vcf.gz",
        TBI = "haplotype_caller/{sample}_germline_variants.vcf.gz.tbi",
```

- Packages and Versions

### 3. Issues and TODO
