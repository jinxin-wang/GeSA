### 1. Description of Mutect2 Panel of Normals Submodule

The Mutect2 Panel of Normals (PoN) submodule is a component of the Mutect2 variant calling tool, which is commonly used for identifying somatic mutations in cancer genomic data. The PoN submodule specifically focuses on creating a Panel of Normals, which is a collection of normal sample data used as a reference to identify and filter out common germline variants or technical artifacts.

By incorporating the Mutect2 PoN submodule into the variant calling pipeline, it improves the accuracy and sensitivity of somatic mutation identification by reducing false-positive calls.

The Mutect2 Panel of Normals (PoN) submodule in the context of exome sequencing (Exome) and split-read analysis (Split) refers to the application of Mutect2 variant calling tool for identifying somatic mutations in exome sequencing data using split-read analysis and constructing a Panel of Normals.

The purpose of the Mutect2 PoN submodule for Exome and Split analysis is to create a Panel of Normals that represents common germline variants and technical artifacts specific to exome sequencing data. This PoN is used as a reference to differentiate true somatic mutations from common germline variants or technical artifacts in the exome data.

### 2. Description of Interfaces and Dependencies

--> rule extract_exom_mutect2_pon

The "extract_exom_mutect2_pon" rule refers to a specific step in a genomic analysis pipeline that involves extracting the Panel of Normals (PoN) generated by the Mutect2 variant calling tool for exome sequencing data.

- Specifications of Input Files
the input file is a compressed VCF file that includes the PoN file generated by Mutect2 during the variant calling process. This PoN file contains variant information and filtering statistics for the common variants observed in the normal exome samples.
```
        Mutect2_vcf = "Mutect2_TvNp/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp.vcf.gz",
        Mutect2_vcf_index = "Mutect2_TvNp/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp.vcf.gz.tbi"
```
- Ouput Files

The rule generate a file that contains the extracted information from the PoN. This file is a variant call format (VCF) file. The extracted information may include variant positions, allele frequencies, filtering criteria, and other relevant details for the common variants observed in the normal exome samples.
```
        exom_Mutect2 = temp("Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom_unsorted.vcf.gz")
```
- Genome Reference

--> A rule to sort exom vcf

The purpose of the rule is to sort the exome VCF file based on genomic coordinates. Sorting the VCF file ensures that the variants are ordered according to their position on the genome.

- input files :

The input to the rule is the original exome VCF file. The path to the VCF file is specified as an input parameter.
```
Mutect2_vcf = "Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom_unsorted.vcf.gz"
```
The rule uses a command-line tool 'vcf-sort' to perform the sorting operation. The tool is invoked within the rule's shell section and takes the input VCF file as an argument.
```
vcfsort = config["vcfsort"]["app"],
```
- output files :
The output of the rule is the sorted exome VCF file. 
The sorting operation generates a new VCF file that contains the variants sorted based on their genomic coordinates. The sorted VCF file maintains the same variants as the input file but presents them in a sorted order
```
exom_Mutect2 = temp("Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom.vcf.gz")
```
- genome reference :

The genome reference used in the rule to sort the exome VCF file would typically be the same genome reference that was used during the variant calling and alignment steps in the exome sequencing analysis

- Packages and Versions

--> A rule to generate a bed from mutect2 vcf, on tumor versus normal with panel of normals

The purpose of the rule is to generate a BED file that represents the genomic coordinates of the variants detected by Mutect2 in the tumor versus normal comparison, considering a panel of normals.

- input files :
The inputs to the rule typically include the Mutect2 VCF file, which contains the variant calls, and the panel of normals (PoN) file, which contains the variants observed in a set of normal samples.
```
        exom_Mutect2 = "Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom.vcf.gz"
```
- output files :
The output of the rule is the BED file that represents the genomic coordinates of the variants detected in the tumor versus normal comparison. The BED file format typically includes columns specifying the chromosome, start position, end position, and additional optional columns with additional information.
```
        exom_Mutect2 = temp("Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom.vcf.gz.tbi")
```
- genome reference :

The genome reference used in the rule to generate a BED file from the Mutect2 VCF is the same genome reference that was used during the Mutect2 variant calling and alignment steps

--> A rule to generate a bed from mutect2 vcf, on tumor versus normal with panel of normals

The purpose of the rule is to generate a BED file from the Mutect2 VCF file, specifically for the tumor versus normal comparison with a panel of normals.

-input files :
The input of the rule to generate a BED file from a Mutect2 VCF includes the Mutect2 VCF file , , it contains actual names of the tumor and normal samples, as well as the panel of normals name, respectively. The Mutect2 VCF file should be in a compressed (gzipped) VCF format.
```
        Mutect2_vcf = "Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom.vcf.gz",
        Mutect2_vcf_index = "Mutect2_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_twicefiltered_TvNp_exom.vcf.gz.tbi"
```
-output files :
The output of the rule is the generated BED file (bed_file), which represents the genomic coordinates of the variants specific to the tumor versus normal comparison 
```
        MAF = temp("oncotator_TvNp_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_annotated_TvNp_exom.TCGAMAF")
```
--> A rule to simplify oncotator output on tumor vs normal samples with panel of normal

The purpose of this rule is to simplify and process the Oncotator output specifically for the tumor versus normal comparison with the aid of a panel of normals. This simplification step helps in reducing the complexity of the annotations and focusing on the relevant information.

- input files :

This input here is the TSV (Tab-Separated Values) file generated by Oncotator for the tumor versus normal comparison with a panel of normals. It contains the annotated variants and their associated annotations in a tabular format.
the pileup file generated for the tumor versus normal comparison with a panel of normals. The pileup file contains the raw read information and base calls at each genomic position for the analyzed samples.
```
tsv = "oncotator_TvNp_tsv_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_TvNp_exom.tsv",
        pileup = "pileup_TvN_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_TvN_exom.pileup.gz"
```

- output files 

Simplified Oncotator Output: The output of the rule is a simplified version of the Oncotator output file, which retains only the relevant information for the tumor versus normal comparison, considering the panel of normals
```
tsv = temp("oncotator_TvNp_tsv_pileup_exom/{tsample}_Vs_{nsample}_PON_{panel_of_normal}_TvNp_with_pileup_exom.tsv")
```
### 3. Issues and TODO
